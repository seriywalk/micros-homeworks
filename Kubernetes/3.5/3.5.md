# Домашнее задание к занятию Troubleshooting

### Цель задания

Устранить неисправности при деплое приложения.

### Чеклист готовности к домашнему заданию

1. Кластер K8s.

### Задание. При деплое приложение web-consumer не может подключиться к auth-db. Необходимо это исправить

1. Установить приложение по команде:
```shell
kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```
2. Выявить проблему и описать.

![2.png](img%2F2.png)

`Не найдены namespaces web, data`

3. Исправить проблему, описать, что сделано.

`создаю namespaces, повторяю установку приложения, проверяю pods`

![3.png](img%2F3.png)

![3.1.png](img%2F3.1.png)

`ошибка выявилась при проверке логов. Приложение не видит имя auth-db`

![3log.png](img%2F3log.png)

`добавляю адрес службы в файл /etc/hosts в обоих pods`

![3sol.png](img%2F3sol.png)

4. Продемонстрировать, что проблема решена.

![4.png](img%2F4.png)

`Аналогичный вывод появился в конце логов приложения`

![4log.png](img%2F4log.png)

**`P.S. Преподаватель не принял работу с такой формулировкой. "модифицировать host у подов - это временный фикс. Представьте, что под или даже нода поменяется, то все заново нужно делать. есть более k8s-ориентированный способ. Посмотрите как работает DNS в кубере"`**

`Каждому сервису, определенному в кластере (включая сам DNS-сервер), присваивается имя DNS. По умолчанию в список поиска DNS клиентского Pod'а будет входить собственное пространство имен Pod'а и домен кластера по умолчанию.
Таким образом, достаточно при проверке работы приложения правильно указать доменное имя службы - auth-db.data и убедиться, что приложение работает. 
`

![4name.png](img%2F4name.png)

### Правила приёма работы

1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.
